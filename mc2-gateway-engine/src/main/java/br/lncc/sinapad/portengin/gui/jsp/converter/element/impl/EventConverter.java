package br.lncc.sinapad.portengin.gui.jsp.converter.element.impl;

import java.util.List;
import java.util.Properties;

import br.lncc.sinapad.core.application.representation.Event;
import br.lncc.sinapad.portengin.gui.jsp.converter.element.ElementConverter;

public class EventConverter implements ElementConverter<String, Event> {

	public String convert(Event e, Properties locale) {
		switch (e.getType()) {
		case DISABLE:
			return convertDisable(e, locale);

		case HIDE:
			return convertHide(e, locale);
		default:
			return "";
		}
	}

	private String convertDisable(Event e, Properties locale) {
		List<String> parameterNames = e.getParameterNames();
		String str = "";
		for (String parameterName : parameterNames) {
			str += "var target = document.getElementById('" + parameterName + "');" + "var target_nl = document.getElementsByName('algorithm[\\\'" + parameterName + "\\\']');" + "var target_input = document.getElementById('" + parameterName + "_input');" + "var target_table = document.getElementById('" + parameterName + "_table');" + "var target_list = document.getElementById('" + parameterName + "_list');" + "var target_cb = document.getElementById('cb_" + parameterName + "');" + "var target_in = document.getElementById('in_" + parameterName + "');" + "var tip = document.getElementById('" + parameterName + "_tip');" + "var tip_link = document.getElementById('tiplink_" + parameterName + "');" + "var tip_img = document.getElementById('tipimg_" + parameterName + "');" + "var target_button = document.getElementById('" + parameterName + "_button');" + "var target_label = document.getElementById('" + parameterName + "_label');" + "var target_nl_label = document.getElementsByName('" + parameterName + "_label');" + "var target_add = document.getElementById('" + parameterName + "_add');" + "var target_remove = document.getElementById('" + parameterName + "_remove');" + "var cond_target = document.getElementById('" + e.getConditionParameter() + "');if(cond_target.tagName == 'INPUT'){var type = cond_target.type;if(type == 'radio'){var nl = document.getElementsByName('algorithm[\\\'" + e.getConditionParameter() + "\\\']');for(var i = 0; i < nl.length; i++){var el = nl[i];if(el.checked){cond_target = el;break;}}}}" + "var cond_value = '" + e.getConditionValue() + "';var value = cond_target.value;" + "if(value == cond_value) {" + "if(target != null) {target.disabled = 'disabled';}" + "if(target_nl != null && target_nl.length > 1){for(var i = 0; i < target_nl.length; i++){target_nl[i].disabled = 'disabled';}}" + "if(target_input != null) {target_input.disabled = 'disabled';}" + "if(tip != null){tip.style.display = 'none';}" + "if(tip_link != null) {tip_link.disabled = 'disabled';tip_img.disabled = 'disabled';}" + "if(target_cb != null) {target_cb.disabled = 'disabled';}" + "if(target_in != null) {target_in.disabled = 'disabled';}" + "if(target_button != null) {target_button.disabled = 'disabled';}" + "if(target_label != null) {target_label.disabled = 'disabled';}" + "if(target_nl_label != null && target_nl_label.length > 1) {for(var i = 0; i < target_nl_label.length; i++){target_nl_label[i].disabled = 'disabled';}}" + "if(target_table != null) {target_table.disabled = 'disabled';}" + "if(target_list != null) {target_list.disabled = 'disabled';}" + "if(target_add != null) {target_add.disabled = 'disabled';}" + "if(target_remove != null) {target_remove.disabled = 'disabled';}}" + "else {" + "if(target != null) {target.disabled = '';}" + "if(target_nl != null && target_nl.length > 1){for(var i = 0; i < target_nl.length; i++){target_nl[i].disabled = '';}}" + "if(target_input != null) {target_input.disabled = '';}" + "if(tip_link != null) {tip_link.disabled = '';tip_img.disabled = '';}" + "if(target_cb != null) {target_cb.disabled = '';}" + "if(target_in != null) {target_in.disabled = '';}" + "if(target_button != null) {target_button.disabled = '';}" + "if(target_label != null) {target_label.disabled = '';}" + "if(target_nl_label != null && target_nl_label.length > 1) {for(var i = 0; i < target_nl_label.length; i++){target_nl_label[i].disabled = '';}}" + "if(target_table != null) {target_table.disabled = '';}" + "if(target_list != null) {target_list.disabled = '';}" + "if(target_add != null) {target_add.disabled = '';}" + "if(target_remove != null) {target_remove.disabled = '';}}";

		}
		return str;
	}

	public String convertHide(Event e, Properties locale) {
		List<String> parameterNames = e.getParameterNames();
		String str = "";
		for (String parameterName : parameterNames) {
			str += "var target = document.getElementById('" + parameterName + "');" + "var target_form = document.getElementById('" + parameterName + "_form');" + "var target_nl = document.getElementsByName('algorithm[\\\'" + parameterName + "\\\']');" + "var target_help = document.getElementById('" + parameterName + "_help');" + "var target_input = document.getElementById('" + parameterName + "_input');" + "var target_table = document.getElementById('" + parameterName + "_table');" + "var target_list = document.getElementById('" + parameterName + "_list');" + "var target_cb = document.getElementById('cb_" + parameterName + "');" + "var target_in = document.getElementById('in_" + parameterName + "');" + "var tip = document.getElementById('" + parameterName + "_tip');" + "var tip_link = document.getElementById('tiplink_" + parameterName + "');" + "var tip_img = document.getElementById('tipimg_" + parameterName + "');" + "var target_button = document.getElementById('" + parameterName + "_button');" + "var target_label = document.getElementById('" + parameterName + "_label');" + "var target_nl_label = document.getElementsByName('" + parameterName + "_label');" + "var target_add = document.getElementById('" + parameterName + "_add');" + "var target_remove = document.getElementById('" + parameterName + "_remove');" + "var target_file = document.getElementById('" + parameterName + "_file');" + "var cond_target = document.getElementById('" + e.getConditionParameter() + "');if(cond_target.tagName == 'INPUT'){var type = cond_target.type;if(type == 'radio'){var nl = document.getElementsByName('algorithm[\\\'" + e.getConditionParameter() + "\\\']');for(var i = 0; i < nl.length; i++){var el = nl[i];if(el.checked){cond_target = el;break;}}}}" + "var cond_value = '" + e.getConditionValue() + "';var value = cond_target.value;" + "if(value == cond_value) {" + "if(target != null){target.disabled = 'disabled';target.style.display = 'none';target.style.visibility = 'hidden';}" + "if(target_form != null){target_form.disabled = 'disabled';target_form.style.display = 'none';target_form.style.visibility = 'hidden';}" + "if(target_nl != null && target_nl.length > 1){for(var i = 0; i < target_nl.length; i++){target_nl[i].disabled = 'disabled';target_nl[i].style.display = 'none';target_nl[i].style.visibility = 'hidden';}}" + "if(target_help != null){target_help.style.display = 'none';target_help.style.visibility = 'hidden';}" + "if(target_input != null){target_input.disabled = 'disabled';target_input.style.display = 'none';target_input.style.visibility = 'hidden';}" + "if(tip != null){tip.style.display = 'none';}" + "if(tip_link != null){tip_link.disabled = 'disabled';tip_link.style.display = 'none';tip_link.style.visibility = 'hidden';tip_img.style.display = 'none';tip_img.style.visibility = 'hidden';}" + "if(target_cb != null) {target_cb.disabled = 'disabled';target_cb.style.display = 'none';target_cb.style.visibility = 'hidden';}" + "if(target_in != null) {target_in.disabled = 'disabled';target_in.style.display = 'none';target_in.style.visibility = 'hidden';}" + "if(target_button != null) {target_button.disabled = 'disabled';target_button.style.display = 'none';target_button.style.visibility = 'hidden';}" + "if(target_label != null) {target_label.disabled = 'disabled';target_label.style.display = 'none';target_label.style.visibility = 'hidden';}" + "if(target_file != null) {target_file.disabled = 'disabled';target_file.style.display = 'none';target_file.style.visibility = 'hidden';}" + "if(target_nl_label != null && target_nl_label.length > 1) {for(var i = 0; i < target_nl_label.length; i++){target_nl_label[i].disabled = 'disabled';target_nl_label[i].style.display = 'none';target_nl_label[i].style.visibility = 'hidden';}}" + "if(target_table != null) {target_table.disabled = 'disabled';target_table.style.display = 'none';target_table.style.visibility = 'hidden';}" + "if(target_list != null) {target_list.disabled = 'disabled';target_list.style.display = 'none';target_list.style.visibility = 'hidden';}" + "if(target_add != null) {target_add.disabled = 'disabled';target_add.style.display = 'none';target_add.style.visibility = 'hidden';}" + "if(target_remove != null) {target_remove.disabled = 'disabled';target_remove.style.display = 'none';target_remove.style.visibility = 'hidden';}}" + "else {" + "if(target != null){target.disabled = '';target.style.display = 'inline';target.style.visibility = 'visible';}" + "if(target_form != null){target_form.disabled = '';target_form.style.display = '';target_form.style.visibility = 'visible';}" + "if(target_nl != null && target_nl.length > 1){for(var i = 0; i < target_nl.length; i++){target_nl[i].disabled = '';target_nl[i].style.display = 'inline';target_nl[i].style.visibility = 'visible';}}" + "if(target_input != null){target_input.disabled = '';target_input.style.display = 'inline';target_input.style.visibility = 'visible';}" + "if(target_help != null){target_help.style.visibility = 'visible';}" + "if(tip_link != null){tip_link.disabled = '';tip_link.style.display = 'inline';tip_link.style.visibility = 'visible';tip_img.style.display = 'inline';tip_img.style.visibility = 'visible';}" + "if(target_cb != null) {target_cb.disabled = '';target_cb.style.display = 'inline';target_cb.style.visibility = 'visible';}" + "if(target_in != null) {target_in.disabled = '';target_in.style.display = '';target_in.style.visibility = 'visible';}" + "if(target_button != null) {target_button.disabled = '';target_button.style.display = 'inline';target_button.style.visibility = 'visible';}" + "if(target_label != null) {target_label.disabled = '';target_label.style.display = 'inline';target_label.style.visibility = 'visible';}" + "if(target_file != null) {target_file.disabled = '';target_file.style.visibility = 'visible';}" + "if(target_nl_label != null && target_nl_label.length > 1) {for(var i = 0; i < target_nl_label.length; i++){target_nl_label[i].disabled = '';target_nl_label[i].style.display = 'inline';target_nl_label[i].style.visibility = 'visible';}}" + "if(target_table != null) {target_table.disabled = '';target_table.style.display = 'inline';target_table.style.visibility = 'visible';}" + "if(target_list != null) {target_list.disabled = '';target_list.style.display = 'inline';target_list.style.visibility = 'visible';}" + "if(target_add != null) {target_add.disabled = '';target_add.style.display = 'inline';target_add.style.visibility = 'visible';}" + "if(target_remove != null) {target_remove.disabled = '';target_remove.style.display = 'inline';target_remove.style.visibility = 'visible';}}";
		}
		return str;
	}
}
